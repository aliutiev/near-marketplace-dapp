{"ast":null,"code":"var Class = function () {\n  var options = Object.create({\n    Source: Object,\n    config: {},\n    buildArgs: []\n  });\n\n  function checkOption(option) {\n    var key = \"config\";\n    if (option instanceof Function) key = \"Source\";else if (option instanceof Array) key = \"buildArgs\";else if (option instanceof Object) key = \"config\";else throw new Error(\"Invalid configuration option.\");\n    if (options.hasOwnProperty(key)) throw new Error(\"Duplicated configuration option: \" + key + \".\");\n    options[key] = option;\n  }\n\n  for (var index = 0, length = arguments.length; index < length; ++index) checkOption(arguments[index]);\n\n  var Source = options.Source,\n      config = options.config,\n      buildArgs = options.buildArgs;\n  return (Source.extend || Class.extend).call(Source, config, buildArgs);\n};\n\nClass.factory = function () {\n  var Source = this;\n  return function () {\n    var instance = this;\n    if (instance.build instanceof Function) instance.build.apply(instance, arguments);\n    if (instance.init instanceof Function) instance.init.apply(instance, arguments);\n  };\n};\n\nClass.extend = function (config, buildArgs) {\n  var Source = this;\n  if (!config) config = {};\n  var Subject;\n  if (config.prototype instanceof Object && config.prototype.constructor !== Object) Subject = config.prototype.constructor;else if (config.factory instanceof Function) Subject = config.factory.call(Source);\n  Subject = (Source.clone || Class.clone).call(Source, Subject, buildArgs);\n  (Subject.merge || Class.merge).call(Subject, config);\n  return Subject;\n};\n\nClass.prototype.extend = function (config, buildArgs) {\n  var subject = this;\n  var instance = (subject.clone || Class.prototype.clone).apply(subject, buildArgs);\n  (instance.merge || Class.prototype.merge).call(instance, config);\n  return instance;\n};\n\nClass.clone = function (Subject, buildArgs) {\n  var Source = this;\n  if (!(Subject instanceof Function)) Subject = (Source.factory || Class.factory).call(Source);\n  Subject.prototype = (Source.prototype.clone || Class.prototype.clone).apply(Source.prototype, buildArgs || []);\n  Subject.prototype.constructor = Subject;\n\n  for (var staticProperty in Source) if (staticProperty !== \"prototype\") Subject[staticProperty] = Source[staticProperty];\n\n  return Subject;\n};\n\nClass.prototype.clone = function () {\n  var subject = this;\n  var instance = Object.create(subject);\n  if (instance.build instanceof Function) instance.build.apply(instance, arguments);\n  return instance;\n};\n\nClass.merge = function (config) {\n  var Subject = this;\n\n  for (var staticProperty in config) if (staticProperty !== \"prototype\") Subject[staticProperty] = config[staticProperty];\n\n  if (config.prototype instanceof Object) (Subject.prototype.merge || Class.prototype.merge).call(Subject.prototype, config.prototype);\n  return Subject;\n};\n\nClass.prototype.merge = function (config) {\n  var subject = this;\n\n  for (var property in config) if (property !== \"constructor\") subject[property] = config[property];\n\n  return subject;\n};\n\nClass.absorb = function (config) {\n  var Subject = this;\n\n  for (var staticProperty in config) if (staticProperty !== \"prototype\" && (Subject[staticProperty] === undefined || Subject[staticProperty] === Function.prototype[staticProperty])) Subject[staticProperty] = config[staticProperty];\n\n  if (config.prototype instanceof Object) (Subject.prototype.absorb || Class.prototype.absorb).call(Subject.prototype, config.prototype);\n  return Subject;\n};\n\nClass.prototype.absorb = function (config) {\n  var subject = this;\n\n  for (var property in config) if (property !== \"constructor\" && (subject[property] === undefined || subject[property] === Object.prototype[property])) subject[property] = config[property];\n\n  return subject;\n};\n\nClass.getAncestor = function () {\n  var Source = this;\n  if (Source !== Source.prototype.constructor) return Source.prototype.constructor;\n};\n\nClass.newInstance = function () {\n  var Subject = this;\n  var instance = Object.create(this.prototype);\n  Subject.apply(instance, arguments);\n  return instance;\n};\n\nmodule.exports = Class;","map":{"version":3,"names":["Class","options","Object","create","Source","config","buildArgs","checkOption","option","key","Function","Array","Error","hasOwnProperty","index","length","arguments","extend","call","factory","instance","build","apply","init","Subject","prototype","constructor","clone","merge","subject","staticProperty","property","absorb","undefined","getAncestor","newInstance","module","exports"],"sources":["C:/Projects/node_modules/o3/lib/Class.js"],"sourcesContent":["var Class = function () {\r\n    var options = Object.create({\r\n        Source: Object,\r\n        config: {},\r\n        buildArgs: []\r\n    });\r\n\r\n    function checkOption(option) {\r\n        var key = \"config\";\r\n        if (option instanceof Function)\r\n            key = \"Source\";\r\n        else if (option instanceof Array)\r\n            key = \"buildArgs\";\r\n        else if (option instanceof Object)\r\n            key = \"config\";\r\n        else\r\n            throw new Error(\"Invalid configuration option.\");\r\n        if (options.hasOwnProperty(key))\r\n            throw new Error(\"Duplicated configuration option: \" + key + \".\");\r\n        options[key] = option;\r\n    }\r\n\r\n    for (var index = 0, length = arguments.length; index < length; ++index)\r\n        checkOption(arguments[index]);\r\n\r\n    var Source = options.Source,\r\n        config = options.config,\r\n        buildArgs = options.buildArgs;\r\n\r\n    return (Source.extend || Class.extend).call(Source, config, buildArgs);\r\n};\r\n\r\nClass.factory = function () {\r\n    var Source = this;\r\n    return function () {\r\n        var instance = this;\r\n        if (instance.build instanceof Function)\r\n            instance.build.apply(instance, arguments);\r\n        if (instance.init instanceof Function)\r\n            instance.init.apply(instance, arguments);\r\n    };\r\n};\r\n\r\nClass.extend = function (config, buildArgs) {\r\n    var Source = this;\r\n    if (!config)\r\n        config = {};\r\n    var Subject;\r\n    if ((config.prototype instanceof Object) && config.prototype.constructor !== Object)\r\n        Subject = config.prototype.constructor;\r\n    else if (config.factory instanceof Function)\r\n        Subject = config.factory.call(Source);\r\n    Subject = (Source.clone || Class.clone).call(Source, Subject, buildArgs);\r\n    (Subject.merge || Class.merge).call(Subject, config);\r\n    return Subject;\r\n};\r\n\r\nClass.prototype.extend = function (config, buildArgs) {\r\n    var subject = this;\r\n    var instance = (subject.clone || Class.prototype.clone).apply(subject, buildArgs);\r\n    (instance.merge || Class.prototype.merge).call(instance, config);\r\n    return instance;\r\n};\r\n\r\nClass.clone = function (Subject, buildArgs) {\r\n    var Source = this;\r\n    if (!(Subject instanceof Function))\r\n        Subject = (Source.factory || Class.factory).call(Source);\r\n    Subject.prototype = (Source.prototype.clone || Class.prototype.clone).apply(Source.prototype, buildArgs || []);\r\n    Subject.prototype.constructor = Subject;\r\n    for (var staticProperty in Source)\r\n        if (staticProperty !== \"prototype\")\r\n            Subject[staticProperty] = Source[staticProperty];\r\n    return Subject;\r\n};\r\n\r\nClass.prototype.clone = function () {\r\n    var subject = this;\r\n    var instance = Object.create(subject);\r\n    if (instance.build instanceof Function)\r\n        instance.build.apply(instance, arguments);\r\n    return instance;\r\n};\r\n\r\nClass.merge = function (config) {\r\n    var Subject = this;\r\n    for (var staticProperty in config)\r\n        if (staticProperty !== \"prototype\")\r\n            Subject[staticProperty] = config[staticProperty];\r\n    if (config.prototype instanceof Object)\r\n        (Subject.prototype.merge || Class.prototype.merge).call(Subject.prototype, config.prototype);\r\n    return Subject;\r\n};\r\n\r\nClass.prototype.merge = function (config) {\r\n    var subject = this;\r\n    for (var property in config)\r\n        if (property !== \"constructor\")\r\n            subject[property] = config[property];\r\n    return subject;\r\n};\r\n\r\nClass.absorb = function (config) {\r\n    var Subject = this;\r\n    for (var staticProperty in config)\r\n        if (staticProperty !== \"prototype\" && (Subject[staticProperty] === undefined || Subject[staticProperty] === Function.prototype[staticProperty]))\r\n            Subject[staticProperty] = config[staticProperty];\r\n    if (config.prototype instanceof Object)\r\n        (Subject.prototype.absorb || Class.prototype.absorb).call(Subject.prototype, config.prototype);\r\n    return Subject;\r\n};\r\n\r\nClass.prototype.absorb = function (config) {\r\n    var subject = this;\r\n    for (var property in config)\r\n        if (property !== \"constructor\" && (subject[property] === undefined || subject[property] === Object.prototype[property]))\r\n            subject[property] = config[property];\r\n    return subject;\r\n};\r\n\r\nClass.getAncestor = function () {\r\n    var Source = this;\r\n    if (Source !== Source.prototype.constructor)\r\n        return Source.prototype.constructor;\r\n};\r\n\r\nClass.newInstance = function () {\r\n    var Subject = this;\r\n    var instance = Object.create(this.prototype);\r\n    Subject.apply(instance, arguments);\r\n    return instance;\r\n};\r\n\r\nmodule.exports = Class;"],"mappings":"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"},"metadata":{},"sourceType":"script"}