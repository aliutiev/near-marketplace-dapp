{"ast":null,"code":"import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\nimport * as buffer from 'buffer';\nconst nearEnv = environment(\"testnet\");\nexport async function initializeContract() {\n  const near = await connect(Object.assign({\n    deps: {\n      keyStore: new keyStores.BrowserLocalStorageKeyStore()\n    }\n  }, nearEnv));\n  window.walletConnection = new WalletConnection(near);\n  window.window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(window.walletConnection.account(), nearEnv.contractName, {\n    viewMethods: [\"getProduct\", \"getProducts\"],\n    changeMethods: [\"buyProduct\", \"setProduct\"]\n  });\n}\nexport async function accountBalance() {\n  return formatNearAmount((await window.walletConnection.account().getAccountBalance()).total, 2);\n}\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}","map":{"version":3,"names":["environment","connect","Contract","keyStores","WalletConnection","formatNearAmount","buffer","nearEnv","initializeContract","near","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","accountBalance","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload"],"sources":["C:/Projects/near-marketplace-dapp/near-marketplace/src/components/utils/near.js"],"sourcesContent":["import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\nimport * as buffer from 'buffer';\n\nconst nearEnv = environment(\"testnet\");\n\nexport async function initializeContract() {\n    const near = await connect(\n      Object.assign(\n        { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n        nearEnv\n      )\n    );\n    window.walletConnection = new WalletConnection(near);\n    window.\n    window.accountId = window.walletConnection.getAccountId();\n    window.contract = new Contract(\n      window.walletConnection.account(),\n      nearEnv.contractName,\n      {\n        viewMethods: [\"getProduct\", \"getProducts\"],\n        changeMethods: [\"buyProduct\", \"setProduct\"],\n      }\n    );\n}\n\nexport async function accountBalance() {\n  return formatNearAmount((await window.walletConnection.account().getAccountBalance()).total, 2);\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,UAAxB;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,SAA5B,EAAuCC,gBAAvC,QAA+D,aAA/D;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AAEA,MAAMC,OAAO,GAAGP,WAAW,CAAC,SAAD,CAA3B;AAEA,OAAO,eAAeQ,kBAAf,GAAoC;EACvC,MAAMC,IAAI,GAAG,MAAMR,OAAO,CACxBS,MAAM,CAACC,MAAP,CACE;IAAEC,IAAI,EAAE;MAAEC,QAAQ,EAAE,IAAIV,SAAS,CAACW,2BAAd;IAAZ;EAAR,CADF,EAEEP,OAFF,CADwB,CAA1B;EAMAQ,MAAM,CAACC,gBAAP,GAA0B,IAAIZ,gBAAJ,CAAqBK,IAArB,CAA1B;EACAM,MAAM,CACNA,MADA,CACOE,SADP,GACmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EADnB;EAEAH,MAAM,CAACI,QAAP,GAAkB,IAAIjB,QAAJ,CAChBa,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EADgB,EAEhBb,OAAO,CAACc,YAFQ,EAGhB;IACEC,WAAW,EAAE,CAAC,YAAD,EAAe,aAAf,CADf;IAEEC,aAAa,EAAE,CAAC,YAAD,EAAe,YAAf;EAFjB,CAHgB,CAAlB;AAQH;AAED,OAAO,eAAeC,cAAf,GAAgC;EACrC,OAAOnB,gBAAgB,CAAC,CAAC,MAAMU,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,GAAkCK,iBAAlC,EAAP,EAA8DC,KAA/D,EAAsE,CAAtE,CAAvB;AACD;AAED,OAAO,eAAeR,YAAf,GAA8B;EACnC,OAAOH,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAP;AACD;AAED,OAAO,SAASS,KAAT,GAAiB;EACtBZ,MAAM,CAACC,gBAAP,CAAwBY,aAAxB,CAAsCrB,OAAO,CAACc,YAA9C;AACD;AAED,OAAO,SAASQ,MAAT,GAAkB;EACvBd,MAAM,CAACC,gBAAP,CAAwBc,OAAxB;EACAf,MAAM,CAACgB,QAAP,CAAgBC,MAAhB;AACD"},"metadata":{},"sourceType":"module"}